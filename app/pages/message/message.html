<ion-header>
  <ion-navbar>
    <ion-segment [(ngModel)]="message">
      <ion-segment-button value="chats">
        Chats
      </ion-segment-button>
      <ion-segment-button value="notifications">
        Notifications
        <!--ion-badge danger *ngIf="unReadCount > 0">{{unReadCount}}</ion-badge-->
      </ion-segment-button>
    </ion-segment>
  </ion-navbar>
</ion-header>

<ion-content (swipeLeft)="swipeTo('notifications')" (swipeRight)="swipeTo('chats')">
  <div [ngSwitch]="message">
    <ion-list *ngSwitchCase="'chats'">
      <ion-list-header>Teams</ion-list-header>
      <ion-item *ngFor="let team of teams | async" tappable (click)="enterChatRoom(team.$key)">
        <ion-avatar item-left>
          <ion-img [src]="(team.$key | teamBasicPipe | async)?.logo">
          </ion-img>
        </ion-avatar>
        <h2>
          {{ (team.$key | teamBasicPipe | async)?.name }}
        </h2>
      </ion-item>

      <!-->
      <ion-item (click)="enterChatRoom()">
        <ion-icon name="ionic" item-left></ion-icon>
        STK Soccer
        <ion-badge item-right secondary>3</ion-badge>
      </ion-item>
      <ion-item>
        <ion-icon name="ionic" item-left></ion-icon>
        EP Sport
        <ion-badge item-right secondary>7</ion-badge>
      </ion-item>
      <-->
    </ion-list>

    <ion-list *ngSwitchCase="'notifications'">
      <ion-list-header>
        Upcoming Matches
      </ion-list-header>
      <ion-item *ngFor="let match of matches | async | matchFilterPipe" tappable (click)="showNotification(match.teamId, match.opponentId, match.$key)">
        <ion-avatar item-left>
          <ion-img [src]="(match.opponentId | teamBasicPipe | async)?.logo">
          </ion-img>
        </ion-avatar>
        <h2>
          {{ (match.opponentId | teamBasicPipe | async)?.name }}
          <ion-badge *ngIf="!match.isRead">new</ion-badge>
        </h2>
        <p><ion-icon name="ios-pin-outline" class="pin-icon"></ion-icon>
        {{ (match.teamId | matchInfoPipe: match.$key | async)?.locationName }}
        </p>
        <ion-note item-right>
          {{getTime((match.teamId | matchInfoPipe:match.$key | async)?.time)}}
        </ion-note>
        <!-->
        <div [style.font-weight]="n.isRead ? 'normal' : 'bold'">{{n.title}}</div>
        <ion-note item-right>{{getTime(n.timestamp)}}</ion-note>
        <-->
      </ion-item>
    </ion-list>
    
  </div>
  <!-->
  <button (click)="test()">test notification</button>
  <button (click)="postNewMatch()">post new match</button>
  <-->
</ion-content>
